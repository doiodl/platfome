{"ast":null,"code":"import _slicedToArray from \"/Users/timurzajnullin/Desktop/translation_web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/timurzajnullin/Desktop/translation_web/src/panels/Persik.js\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport connect from '@vkontakte/vk-connect';\nimport { platform, IOS } from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport HeaderButton from '@vkontakte/vkui/dist/components/HeaderButton/HeaderButton';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon28Send from '@vkontakte/icons/dist/28/send';\nimport { FormLayout, FormLayoutGroup, Input } from '@vkontakte/vkui';\nimport $ from 'jquery';\nimport persik from '../img/persik.png';\nimport 'youtube-video-js';\nimport YouTubePlayer from 'react-player/lib/players/YouTube';\nimport './Persik.css';\nimport Chat from './Chat';\nimport { render } from 'react-dom';\nconst osName = platform();\n\nconst Persik = props => {\n  // connect.send(\"VKWebAppResizeWindow\", { \"width\": 800, \"height\": 900 });\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        url = _useState2[0],\n        setUrl = _useState2[1];\n\n  console.log(props);\n  if (!('id' in props.fetchedUser)) props.fetchedUser.id = '82815081';\n\n  function send_req() {\n    let user = {\n      type: 'js_test',\n      object: {\n        user_id: props.fetchedUser.id\n      }\n    };\n    fetch('https://doiodl.pythonanywhere.com/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify(user)\n    }).then(function (response) {\n      console.log(response);\n      return response.json();\n    }).then(function (data) {\n      console.log(data);\n    });\n  }\n\n  send_req();\n  setInterval(function () {\n    send_req();\n  }, 150000000);\n\n  function get_url() {\n    let user = {\n      type: 'js_test',\n      object: {\n        type: \"get_url\"\n      }\n    };\n    fetch('https://doiodl.pythonanywhere.com/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify(user)\n    }).then(function (response) {\n      console.log(response);\n      return response.json();\n    }).then(function (data) {\n      return data['url'];\n    });\n  }\n\n  ;\n  url = get_url();\n  console.log(url);\n  return React.createElement(Panel, {\n    id: props.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(PanelHeader, {\n    left: React.createElement(HeaderButton, {\n      onClick: props.go,\n      \"data-to\": \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, osName === IOS ? React.createElement(Icon28ChevronBack, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }) : React.createElement(Icon24Back, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"\\u0422\\u0440\\u0430\\u043D\\u0441\\u043B\\u044F\\u0446\\u0438\\u044F\"), React.createElement(Group, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Div, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(YouTubePlayer, {\n    width: \"device-width\",\n    url: this.url,\n    controls: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })), React.createElement(Chat, {\n    name: \"chat_main\",\n    fetchedUser: props.fetchedUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(Div, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Button, {\n    size: \"xl\",\n    level: \"2\",\n    onClick: props.go,\n    \"data-to\": \"home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u0422\\u0440\\u0430\\u043D\\u0441\\u043B\\u044F\\u0446\\u0438\\u044E\"))));\n};\n\nPersik.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired\n};\nexport default Persik;","map":{"version":3,"sources":["/Users/timurzajnullin/Desktop/translation_web/src/panels/Persik.js"],"names":["React","useState","PropTypes","connect","platform","IOS","Panel","PanelHeader","HeaderButton","Group","Div","Button","Icon28ChevronBack","Icon24Back","Icon28Send","FormLayout","FormLayoutGroup","Input","$","persik","YouTubePlayer","Chat","render","osName","Persik","props","url","setUrl","console","log","fetchedUser","id","send_req","user","type","object","user_id","fetch","method","headers","body","JSON","stringify","then","response","json","data","setInterval","get_url","go","propTypes","string","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport connect from '@vkontakte/vk-connect';\nimport { platform, IOS } from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport HeaderButton from '@vkontakte/vkui/dist/components/HeaderButton/HeaderButton';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon28Send from '@vkontakte/icons/dist/28/send';\nimport { FormLayout, FormLayoutGroup, Input } from '@vkontakte/vkui';\nimport $ from 'jquery';\nimport persik from '../img/persik.png';\nimport 'youtube-video-js';\nimport YouTubePlayer from 'react-player/lib/players/YouTube';\nimport './Persik.css';\nimport Chat from './Chat'\nimport { render } from 'react-dom';\n\nconst osName = platform();\n\nconst Persik = props => {\n\t// connect.send(\"VKWebAppResizeWindow\", { \"width\": 800, \"height\": 900 });\n\tconst [url, setUrl] = useState(0);\n\tconsole.log(props);\n\tif (!('id' in props.fetchedUser))\n\t\tprops.fetchedUser.id = '82815081' \n\tfunction send_req() {\n\t\tlet user = {\n\t\t\ttype: 'js_test',\n\t\t\tobject: {\n\t\t\t\tuser_id: props.fetchedUser.id\n\t\t\t}\n\t\t};\n\t\tfetch('https://doiodl.pythonanywhere.com/', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json;charset=utf-8'\n\t\t\t},\n\t\t\tbody: JSON.stringify(user)\n\t\t})\n\t\t\t.then(function (response) {\n\t\t\t\tconsole.log(response)\n\t\t\t\treturn response.json();\n\t\t  }).then(function(data) {\n\t\t\t  console.log(data);\n\t\t  });\n\t}\n\tsend_req()\n\tsetInterval(function(){ \n\t\t\tsend_req() \n\t}, 150000000);\n\tfunction get_url() {\n\t\tlet user = {\n\t\t\ttype: 'js_test',\n\t\t\tobject: {\n\t\t\t\ttype: \"get_url\"\n\t\t\t}\n\t\t};\n\t\tfetch('https://doiodl.pythonanywhere.com/', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json;charset=utf-8'\n\t\t\t},\n\t\t\tbody: JSON.stringify(user)\n\t\t})\n\t\t\t.then(function (response) {\n\t\t\t\tconsole.log(response)\n\t\t\t\treturn response.json();\n\t\t  }).then(function(data) {\n\t\t\t  return data['url']\n\t\t  });\n\t};\n\turl = get_url();\n\tconsole.log(url)\n\treturn (\n\t\t<Panel id={props.id}>\n\t\t\t<PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={props.go} data-to=\"home\">\n\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n\t\t\t\t</HeaderButton>}\n\t\t\t>\n\t\t\t\tТрансляция\n\t\t</PanelHeader>\n\t\t\t<Group>\n\t\t\t\t<Div>\n\t\t\t\t\t<YouTubePlayer\n\t\t\t\t\twidth='device-width'\n\t\t\t\t\turl={this.url}\n\t\t\t\t\tcontrols\n\t\t\t\t\t/>\n\t\t\t\t</Div>\n\t\t\t\t<Chat name='chat_main' fetchedUser={props.fetchedUser}></Chat>\n\t\t\t\t<Div>\n\t\t\t\t\t<Button size=\"xl\" level=\"2\" onClick={props.go} data-to=\"home\">\n\t\t\t\t\t\tЗавершить Трансляцию\n\t\t\t\t\t</Button>\n\t\t\t\t</Div>\n\t\t\t</Group>\n\t\t</Panel>);\n\t\n\t\t\t\n}\n\nPersik.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n};\n\n\nexport default Persik;\n"]},"metadata":{},"sourceType":"module"}